<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="al:android:app_name" content="Medium" />
    <meta property="og:site_name" content="nikstar/blog" />
    <meta property="article:published_time" content="2020-02-06T12:00:00.000Z" />
    <meta property="og:description" content="A better way to add Instant View for custom domains by using Medium template" />
    <meta property="og:image" content="/blog/pictures/instant-view-for-custom-domain-cover.png" />
    <meta name="author" content="Nikita S." />
    <title>Instant View for Custom Domain V2 &ndash; nikstar/blog</title>
    
    <link rel="stylesheet" href="https://marco.org/main14.css"/>
    <script src="https://marco.org/jquery-and-bigfoot.js"></script>
</head>
<body>
    <article>
        <header>
            <h1>
                <a href="/blog/instant-view-for-custom-domain-v2">Instant View for Custom Domain V2</a>
            </h1>
            
            <p>
                <time datetime="2020-01-29T20:02:00+03:00" pubdate="pubdate">February 6, 2020</time>
                <a class="permalink" title="Permalink" href="/blog/instant-view-for-custom-domain-v2"><span class="noprint">‚àû</span><span class="printonly">/blog/instant-view-for-custom-domain</span></a>
            </p>
        </header>
        
        <p>
            In my <a href="/blog/instant-view-for-custom-domain.html">previous post</a> I showed a way IV can be added to any domain by modifying server configuration and cross-posting to WordPress. Turns out there's a much simpler way to achieve this by disguising your page as a Medium article. Access to server config and WP is no longer required.
            
        </p>
        <p>
            Big thank you to <a href="https://t.me/fishchev">Misho</a>, <a href="https://t.me/corbee">Illia</a>, w3drt46523trc26, max, ùî∏ ¬∑ ùïÑ, prettydude and everyone in <a href="https://t.me/instantview_russian">Russian Instant View chat</a> for discovering this. 
        </p>
        <p>
            Two things need to be changed in the page source: meta tags and general page structure.
        </p>
        
        <h2>
            Meta tags
        </h2>
        <ul>
            <li>
                <p><code>&lt;meta property="al:android:app_name" content="Medium" /&gt;<br/></code></p>
                <p>This will make Telegram use Medium template for our article</p>
            </li>
            <li>
                <p><code>&lt;meta property="article:published_time" content="2020-02-02T02:02:02.000Z" /&gt;<br/></code></p>
                <p>Setting date is <b>required</b> due to specifics of Medium template</p>
            </li>
            <li>
                <p><code>
                    &lt;meta property="og:site_name" content="SITE_NAME" /&gt;<br/>
                    &lt;meta property="og:description" content="DESCRIPTION" /&gt;<br/>
                    &lt;meta property="og:image" content="PREVIEW_IMAGE_URL" /&gt;<br/>
                    &lt;meta name="author" content="AUTHOR_NAME" /&gt;<br/>
                </code></p>
                <p>Other tags needed to fill out preview</p>
            </li>
            <li>
                <p></p><code>&lt;meta name="telegram:channel" content="@YOUR_CHANNEL"&gt;<br/></code></p>
                <p>You can even add a link to your telegram channel</p>
            </li>
        </ul>
        
        <h2>
            Page structure
        </h2>
        <p>
            Page HTML should be structured so that Medium template works with it. We can't know exactly what this template contains but there is a sample version <a href="https://instantview.telegram.org/samples/medium.com/">available</a>. You can copy it to a <a href="https://instantview.telegram.org/my/">custom template</a> to debug any issues. Live template for Medium is more extensive than the sample and supports more complex layouts. Try, test, iterate.
        </p>
        <p>
            The best way to make your page work is to use <i><a href="https://instantview.telegram.org/docs#supported-types">native IV markup</a></i>: something that would work with the most basic template
        </p>
        <p><code>
            ~version: "2.1"<br/>
            title: //h1<br/>
            body: //article<br/>
        </code></p>
        <p>
            For example, article text should be placed inside <code>&lt;article&gt;</code>, picture captions inside <code>&lt;figure&gt;&lt;figcaption&gt;</code>, etc.
        </p>
        <p>
            Alternatively you could try to replicate Medium page structure; this will work too. 
        </p>
        <p>
            Cover image can be added be placing following block inside <code>&lt;article&gt;</code>:
        </p>
        <p><code><pre>&lt;section class="is-imageBackgrounded">
    &lt;figure>
        &lt;img src="https://i.imgur.com/ea3mHTv.png"/>
    &lt;/figure>
&lt;/section></pre></code></p>
        
        <h2>Limitations</h2>
        <p>
            No matter what you do with the page structure, you are still stuck with Medium template. Looks like there is no way to set <code>kicker</code>, <code>author_url</code> and <code>document_url</code>.
        </p>

        <hr/>
        <p>
            And this is it. Much nicer than before.
        </p>
        <p>
            Thanks for reading. <a href="https://t.me/nikstar">Get in touch on Telegram.</a>
        </p>
    </article>
    
    <div class="fin">&#9670;</div>
    <footer style="text-align: center;">
        <p>
            This blog has been created as a proof of concept and is not a real blog. Layout and CSS taken from <a href="https://marco.org">Marco.org</a>
        </p>
    </footer>
</body>
</html>
